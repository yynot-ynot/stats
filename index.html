<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>FFXIV DPS and Healing Trend</title>
  <link rel="stylesheet" href="css/style.css" />
  <!-- pako for gzip support -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
  <!-- Plotly.js for plotting -->
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
  <!-- Main app launcher (ES module) -->
  <script type="module" src="js/core/initLauncher.js"></script>
  <link rel="icon" href="assets/favicon.ico" />
</head>

<body>
  <h1>FFXIV DPS and Healing Trend</h1>
  <div id="view-switcher">
    <button type="button" data-view-id="trend" aria-pressed="true">
      Trend View
    </button>
    <button type="button" data-view-id="percentile" aria-pressed="false">
      Percentile View
    </button>
  </div>

  <div id="filters">
    <!-- ================================
         Raid Title and Custom Dropdown
         ================================ -->
    <div class="dropdown-section">
      <h2 id="raid-title" class="selectable-title">[Select Raid]</h2>
      <div id="raid-dropdown" class="custom-dropdown hidden-dropdown"></div>
    </div>

    <!-- ================================
         Boss Subheader and Custom Dropdown
         ================================ -->
    <div class="dropdown-section">
      <h3 id="boss-subheader" class="selectable-subheader">[Select Boss]</h3>
    <div id="boss-dropdown" class="custom-dropdown hidden-dropdown"></div>
    </div>

    <!-- Hidden native <select> for accessibility/fallback -->
    <select id="raid-select" style="display: none"></select>
    <select id="boss-select" style="display: none"></select>

    <!-- ==========================================================================
         FFXIV Percentile/Reference/Comparison Slider Styles
         ========================================================================== -->
    <div id="percentile-slider-container" data-view="trend" class="view-hidden">
      <label id="percentile-label">Percentile:</label>
      <input id="percentile-slider" type="range" />
      <!-- Overlay for ticks and labels (generated dynamically) -->
      <div class="slider-tick-overlay"></div>
      <div class="medieval-slider-selected-value"></div>
    </div>
    <!-- (End Percentile Slider) -->
  </div>

  <div id="trend-view-placeholder" class="chart-empty-message" data-view="trend"></div>

  <!-- ================================
       Plot Containers (DPS/Healing)
       ================================ -->
  <div id="dps-plot-container" data-view="trend" class="view-hidden"></div>
  <div id="healing-plot-container" data-view="trend" class="view-hidden"></div>

  <!-- ==========================================================================
       Comparison Percentile Filters
       ========================================================================== -->
  <div id="reference-percentile-container" data-view="trend" class="view-hidden"></div>
  <div id="comparison-slider-container" data-view="trend" class="view-hidden"></div>

  <!-- ================================
       Comparison Plots and Message
       ================================ -->
  <div id="dps-comparison-plot-container" data-view="trend" class="view-hidden"></div>
  <div id="healing-comparison-plot-container" data-view="trend" class="view-hidden"></div>
  <div id="comparison-message" data-view="trend" class="view-hidden"></div>

  <!-- ================================
       Parse Trend Charts
       ================================ -->
  <div id="parse-total-plot-container" data-view="trend" class="view-hidden"></div>
  <div id="parse-delta-plot-container" data-view="trend" class="view-hidden"></div>

  <!-- ================================
       Percentile View Placeholder
       ================================ -->
  <div id="percentile-view-container" data-view="percentile" class="view-hidden">
    <div id="percentile-view-placeholder" class="chart-empty-message"></div>
    <div id="percentile-view-content" class="percentile-view-content view-hidden">
      <div id="percentile-date-slider-container" class="percentile-date-slider" data-view="percentile"></div>
      <div class="percentile-chart-section">
        <h3>DPS Percentile</h3>
        <div id="percentile-dps-chart" class="percentile-chart"></div>
      </div>
      <div class="percentile-chart-section">
        <h3>Healing Percentile</h3>
        <div id="percentile-hps-chart" class="percentile-chart"></div>
      </div>
    </div>
  </div>

  <!-- ================================
       Sidebar Header Bar (Right-top)
       ================================ -->
  <div id="sidebar-header-bar">
    <!-- ==== DPS Metric Selector ==== -->
    <div id="dps-type-label-container" tabindex="0" role="button" aria-label="Show/hide DPS metric sidebar">
      <div id="dps-metric-label">DPS Metric</div>
      <div id="dps-type-selected-label"></div>
      <!-- Hidden select for accessibility/fallback -->
      <select id="dps-type-select" style="display: none"></select>
    </div>

    <!-- ==== Jobs Sidebar Toggle ==== -->
    <div id="sidebar-label-container" tabindex="0" role="button" aria-label="Show/hide job sidebar">
      <div id="sidebar-jobs-label">Jobs</div>
      <div id="sidebar-selected-icons"></div>
    </div>
  </div>

  <!-- ================================
       Job Selection Sidebar
       ================================ -->
    <div id="job-sidebar" class="collapsed">
    <h2>Jobs</h2>
    <div id="job-icons-container">
      <!-- Dynamically populated job icons go here -->
    </div>
  </div>
</body>

</html>
